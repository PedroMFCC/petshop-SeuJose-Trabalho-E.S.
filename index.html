<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Produtos</title>
    <style>
        /* Estilos básicos apenas para organização visual */
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }
        .hidden {
            display: none;
        }
        .product {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
        }
        input, button {
            padding: 8px;
            margin: 5px;
        }
        .error {
            color: red;
        }
        .success {
            color: green;
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginContainer" class="container">
        <h2>Login</h2>
        <div>
            <input type="text" id="loginUsername" placeholder="Usuário">
            <input type="password" id="loginPassword" placeholder="Senha">
            <button onclick="login()">Entrar</button>
        </div>
        <p>Não tem conta? <a href="#" onclick="showRegister()">Cadastre-se</a></p>
        <p id="loginMessage" class="error"></p>
    </div>

    <!-- Tela de Cadastro -->
    <div id="registerContainer" class="container hidden">
        <h2>Cadastro de Usuário</h2>
        <div>
            <input type="text" id="registerUsername" placeholder="Usuário">
            <input type="password" id="registerPassword" placeholder="Senha">
            <button onclick="register()">Cadastrar</button>
        </div>
        <p>Já tem conta? <a href="#" onclick="showLogin()">Faça login</a></p>
        <p id="registerMessage" class="error"></p>
    </div>

    <!-- Painel do Usuário -->
    <div id="userPanel" class="container hidden">
        <h2>Bem-vindo, <span id="userName"></span>!</h2>
        <button onclick="logout()">Sair</button>
        
        <h3>Produtos Disponíveis</h3>
        <div id="productsList"></div>
    </div>

    <!-- Painel do Administrador -->
    <div id="adminPanel" class="container hidden">
        <h2>Painel do Administrador</h2>
        <button onclick="logout()">Sair</button>
        
        <h3>Adicionar Novo Produto</h3>
        <div>
            <input type="text" id="productName" placeholder="Nome do Produto">
            <input type="text" id="productDescription" placeholder="Descrição">
            <input type="number" id="productPrice" placeholder="Preço" step="0.01">
            <button onclick="addProduct()">Adicionar Produto</button>
        </div>
        <p id="productMessage" class="error"></p>
        
        <h3>Produtos Cadastrados</h3>
        <div id="adminProductsList"></div>
    </div>

    <script>
        // Dados iniciais
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let currentUser = null;
        
        // Admin fixo
        const adminUser = {
            username: 'admin',
            password: 'admin123',
            isAdmin: true
        };
        
        // Verificar se o admin já existe, senão adicionar
        if (!users.find(user => user.username === adminUser.username)) {
            users.push(adminUser);
            localStorage.setItem('users', JSON.stringify(users));
        }
        
        // Elementos DOM
        const loginContainer = document.getElementById('loginContainer');
        const registerContainer = document.getElementById('registerContainer');
        const userPanel = document.getElementById('userPanel');
        const adminPanel = document.getElementById('adminPanel');
        const loginMessage = document.getElementById('loginMessage');
        const registerMessage = document.getElementById('registerMessage');
        const productMessage = document.getElementById('productMessage');
        const productsList = document.getElementById('productsList');
        const adminProductsList = document.getElementById('adminProductsList');
        const userName = document.getElementById('userName');
        
        // Funções de navegação
        function showLogin() {
            loginContainer.classList.remove('hidden');
            registerContainer.classList.add('hidden');
            userPanel.classList.add('hidden');
            adminPanel.classList.add('hidden');
            loginMessage.textContent = '';
            registerMessage.textContent = '';
        }
        
        function showRegister() {
            loginContainer.classList.add('hidden');
            registerContainer.classList.remove('hidden');
            userPanel.classList.add('hidden');
            adminPanel.classList.add('hidden');
            loginMessage.textContent = '';
            registerMessage.textContent = '';
        }
        
        // Função de login
        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                loginMessage.textContent = 'Preencha todos os campos';
                return;
            }
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                document.getElementById('loginUsername').value = '';
                document.getElementById('loginPassword').value = '';
                
                if (user.isAdmin) {
                    showAdminPanel();
                } else {
                    showUserPanel();
                }
            } else {
                loginMessage.textContent = 'Usuário ou senha incorretos';
            }
        }
        
        // Função de cadastro
        function register() {
            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!username || !password) {
                registerMessage.textContent = 'Preencha todos os campos';
                return;
            }
            
            if (users.find(u => u.username === username)) {
                registerMessage.textContent = 'Usuário já existe';
                return;
            }
            
            const newUser = {
                username: username,
                password: password,
                isAdmin: false
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            registerMessage.textContent = 'Usuário cadastrado com sucesso!';
            registerMessage.className = 'success';
            
            setTimeout(() => {
                showLogin();
            }, 1500);
        }
        
        // Função de logout
        function logout() {
            currentUser = null;
            showLogin();
        }
        
        // Mostrar painel do usuário
        function showUserPanel() {
            loginContainer.classList.add('hidden');
            registerContainer.classList.add('hidden');
            userPanel.classList.remove('hidden');
            adminPanel.classList.add('hidden');
            
            userName.textContent = currentUser.username;
            displayProducts();
        }
        
        // Mostrar painel do administrador
        function showAdminPanel() {
            loginContainer.classList.add('hidden');
            registerContainer.classList.add('hidden');
            userPanel.classList.add('hidden');
            adminPanel.classList.remove('hidden');
            
            displayAdminProducts();
        }
        
        // Adicionar produto (admin)
        function addProduct() {
            const name = document.getElementById('productName').value;
            const description = document.getElementById('productDescription').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            
            if (!name || !description || !price) {
                productMessage.textContent = 'Preencha todos os campos';
                return;
            }
            
            if (isNaN(price) || price <= 0) {
                productMessage.textContent = 'Preço deve ser um valor válido';
                return;
            }
            
            const newProduct = {
                id: Date.now(), // ID simples baseado no timestamp
                name: name,
                description: description,
                price: price
            };
            
            products.push(newProduct);
            localStorage.setItem('products', JSON.stringify(products));
            
            productMessage.textContent = 'Produto adicionado com sucesso!';
            productMessage.className = 'success';
            
            document.getElementById('productName').value = '';
            document.getElementById('productDescription').value = '';
            document.getElementById('productPrice').value = '';
            
            displayAdminProducts();
            
            setTimeout(() => {
                productMessage.textContent = '';
                productMessage.className = 'error';
            }, 2000);
        }
        
        // Exibir produtos para o usuário
        function displayProducts() {
            productsList.innerHTML = '';
            
            if (products.length === 0) {
                productsList.innerHTML = '<p>Nenhum produto disponível no momento.</p>';
                return;
            }
            
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <h4>${product.name}</h4>
                    <p>${product.description}</p>
                    <p><strong>Preço: R$ ${product.price.toFixed(2)}</strong></p>
                `;
                productsList.appendChild(productDiv);
            });
        }
        
        // Exibir produtos para o admin (com opção de remover)
        function displayAdminProducts() {
            adminProductsList.innerHTML = '';
            
            if (products.length === 0) {
                adminProductsList.innerHTML = '<p>Nenhum produto cadastrado.</p>';
                return;
            }
            
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <h4>${product.name}</h4>
                    <p>${product.description}</p>
                    <p><strong>Preço: R$ ${product.price.toFixed(2)}</strong></p>
                    <button onclick="removeProduct(${product.id})">Remover</button>
                `;
                adminProductsList.appendChild(productDiv);
            });
        }
        
        // Remover produto (admin)
        function removeProduct(productId) {
            if (confirm('Tem certeza que deseja remover este produto?')) {
                products = products.filter(product => product.id !== productId);
                localStorage.setItem('products', JSON.stringify(products));
                displayAdminProducts();
            }
        }
        
        // Inicializar a aplicação
        showLogin();
    </script>
</body>
</html>